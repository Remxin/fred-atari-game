(()=>{"use strict";var t={593:(t,i,e)=>{Object.defineProperty(i,"zR",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(i,"Qc",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(i,"Pz",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(i,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(i,"v3",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(i,"v4",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(i,"v5",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(i,"Gu",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(i,"i8",{enumerable:!0,get:function(){return h.default}});var n=u(e(922)),o=u(e(964)),s=u(e(509)),r=u(e(669)),a=u(e(440)),h=u(e(108)),c=u(e(392)),l=u(e(94)),p=u(e(384));function u(t){return t&&t.__esModule?t:{default:t}}},489:(t,i)=>{function e(t){return 14+(t+64>>>9<<4)+1}function n(t,i){const e=(65535&t)+(65535&i);return(t>>16)+(i>>16)+(e>>16)<<16|65535&e}function o(t,i,e,o,s,r){return n((a=n(n(i,t),n(o,r)))<<(h=s)|a>>>32-h,e);var a,h}function s(t,i,e,n,s,r,a){return o(i&e|~i&n,t,i,s,r,a)}function r(t,i,e,n,s,r,a){return o(i&n|e&~n,t,i,s,r,a)}function a(t,i,e,n,s,r,a){return o(i^e^n,t,i,s,r,a)}function h(t,i,e,n,s,r,a){return o(e^(i|~n),t,i,s,r,a)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;i.default=function(t){if("string"==typeof t){const i=unescape(encodeURIComponent(t));t=new Uint8Array(i.length);for(let e=0;e<i.length;++e)t[e]=i.charCodeAt(e)}return function(t){const i=[],e=32*t.length,n="0123456789abcdef";for(let o=0;o<e;o+=8){const e=t[o>>5]>>>o%32&255,s=parseInt(n.charAt(e>>>4&15)+n.charAt(15&e),16);i.push(s)}return i}(function(t,i){t[i>>5]|=128<<i%32,t[e(i)-1]=i;let o=1732584193,c=-271733879,l=-1732584194,p=271733878;for(let i=0;i<t.length;i+=16){const e=o,u=c,d=l,f=p;o=s(o,c,l,p,t[i],7,-680876936),p=s(p,o,c,l,t[i+1],12,-389564586),l=s(l,p,o,c,t[i+2],17,606105819),c=s(c,l,p,o,t[i+3],22,-1044525330),o=s(o,c,l,p,t[i+4],7,-176418897),p=s(p,o,c,l,t[i+5],12,1200080426),l=s(l,p,o,c,t[i+6],17,-1473231341),c=s(c,l,p,o,t[i+7],22,-45705983),o=s(o,c,l,p,t[i+8],7,1770035416),p=s(p,o,c,l,t[i+9],12,-1958414417),l=s(l,p,o,c,t[i+10],17,-42063),c=s(c,l,p,o,t[i+11],22,-1990404162),o=s(o,c,l,p,t[i+12],7,1804603682),p=s(p,o,c,l,t[i+13],12,-40341101),l=s(l,p,o,c,t[i+14],17,-1502002290),c=s(c,l,p,o,t[i+15],22,1236535329),o=r(o,c,l,p,t[i+1],5,-165796510),p=r(p,o,c,l,t[i+6],9,-1069501632),l=r(l,p,o,c,t[i+11],14,643717713),c=r(c,l,p,o,t[i],20,-373897302),o=r(o,c,l,p,t[i+5],5,-701558691),p=r(p,o,c,l,t[i+10],9,38016083),l=r(l,p,o,c,t[i+15],14,-660478335),c=r(c,l,p,o,t[i+4],20,-405537848),o=r(o,c,l,p,t[i+9],5,568446438),p=r(p,o,c,l,t[i+14],9,-1019803690),l=r(l,p,o,c,t[i+3],14,-187363961),c=r(c,l,p,o,t[i+8],20,1163531501),o=r(o,c,l,p,t[i+13],5,-1444681467),p=r(p,o,c,l,t[i+2],9,-51403784),l=r(l,p,o,c,t[i+7],14,1735328473),c=r(c,l,p,o,t[i+12],20,-1926607734),o=a(o,c,l,p,t[i+5],4,-378558),p=a(p,o,c,l,t[i+8],11,-2022574463),l=a(l,p,o,c,t[i+11],16,1839030562),c=a(c,l,p,o,t[i+14],23,-35309556),o=a(o,c,l,p,t[i+1],4,-1530992060),p=a(p,o,c,l,t[i+4],11,1272893353),l=a(l,p,o,c,t[i+7],16,-155497632),c=a(c,l,p,o,t[i+10],23,-1094730640),o=a(o,c,l,p,t[i+13],4,681279174),p=a(p,o,c,l,t[i],11,-358537222),l=a(l,p,o,c,t[i+3],16,-722521979),c=a(c,l,p,o,t[i+6],23,76029189),o=a(o,c,l,p,t[i+9],4,-640364487),p=a(p,o,c,l,t[i+12],11,-421815835),l=a(l,p,o,c,t[i+15],16,530742520),c=a(c,l,p,o,t[i+2],23,-995338651),o=h(o,c,l,p,t[i],6,-198630844),p=h(p,o,c,l,t[i+7],10,1126891415),l=h(l,p,o,c,t[i+14],15,-1416354905),c=h(c,l,p,o,t[i+5],21,-57434055),o=h(o,c,l,p,t[i+12],6,1700485571),p=h(p,o,c,l,t[i+3],10,-1894986606),l=h(l,p,o,c,t[i+10],15,-1051523),c=h(c,l,p,o,t[i+1],21,-2054922799),o=h(o,c,l,p,t[i+8],6,1873313359),p=h(p,o,c,l,t[i+15],10,-30611744),l=h(l,p,o,c,t[i+6],15,-1560198380),c=h(c,l,p,o,t[i+13],21,1309151649),o=h(o,c,l,p,t[i+4],6,-145523070),p=h(p,o,c,l,t[i+11],10,-1120210379),l=h(l,p,o,c,t[i+2],15,718787259),c=h(c,l,p,o,t[i+9],21,-343485551),o=n(o,e),c=n(c,u),l=n(l,d),p=n(p,f)}return[o,c,l,p]}(function(t){if(0===t.length)return[];const i=8*t.length,n=new Uint32Array(e(i));for(let e=0;e<i;e+=8)n[e>>5]|=(255&t[e/8])<<e%32;return n}(t),8*t.length))}},207:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};i.default=e},440:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default="00000000-0000-0000-0000-000000000000"},384:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,o=(n=e(392))&&n.__esModule?n:{default:n};i.default=function(t){if(!(0,o.default)(t))throw TypeError("Invalid UUID");let i;const e=new Uint8Array(16);return e[0]=(i=parseInt(t.slice(0,8),16))>>>24,e[1]=i>>>16&255,e[2]=i>>>8&255,e[3]=255&i,e[4]=(i=parseInt(t.slice(9,13),16))>>>8,e[5]=255&i,e[6]=(i=parseInt(t.slice(14,18),16))>>>8,e[7]=255&i,e[8]=(i=parseInt(t.slice(19,23),16))>>>8,e[9]=255&i,e[10]=(i=parseInt(t.slice(24,36),16))/1099511627776&255,e[11]=i/4294967296&255,e[12]=i>>>24&255,e[13]=i>>>16&255,e[14]=i>>>8&255,e[15]=255&i,e}},900:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},827:(t,i)=>{let e;Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){if(!e&&(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(n)};const n=new Uint8Array(16)},32:(t,i)=>{function e(t,i,e,n){switch(t){case 0:return i&e^~i&n;case 1:case 3:return i^e^n;case 2:return i&e^i&n^e&n}}function n(t,i){return t<<i|t>>>32-i}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;i.default=function(t){const i=[1518500249,1859775393,2400959708,3395469782],o=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){const i=unescape(encodeURIComponent(t));t=[];for(let e=0;e<i.length;++e)t.push(i.charCodeAt(e))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const s=t.length/4+2,r=Math.ceil(s/16),a=new Array(r);for(let i=0;i<r;++i){const e=new Uint32Array(16);for(let n=0;n<16;++n)e[n]=t[64*i+4*n]<<24|t[64*i+4*n+1]<<16|t[64*i+4*n+2]<<8|t[64*i+4*n+3];a[i]=e}a[r-1][14]=8*(t.length-1)/Math.pow(2,32),a[r-1][14]=Math.floor(a[r-1][14]),a[r-1][15]=8*(t.length-1)&4294967295;for(let t=0;t<r;++t){const s=new Uint32Array(80);for(let i=0;i<16;++i)s[i]=a[t][i];for(let t=16;t<80;++t)s[t]=n(s[t-3]^s[t-8]^s[t-14]^s[t-16],1);let r=o[0],h=o[1],c=o[2],l=o[3],p=o[4];for(let t=0;t<80;++t){const o=Math.floor(t/20),a=n(r,5)+e(o,h,c,l)+p+i[o]+s[t]>>>0;p=l,l=c,c=n(h,30)>>>0,h=r,r=a}o[0]=o[0]+r>>>0,o[1]=o[1]+h>>>0,o[2]=o[2]+c>>>0,o[3]=o[3]+l>>>0,o[4]=o[4]+p>>>0}return[o[0]>>24&255,o[0]>>16&255,o[0]>>8&255,255&o[0],o[1]>>24&255,o[1]>>16&255,o[1]>>8&255,255&o[1],o[2]>>24&255,o[2]>>16&255,o[2]>>8&255,255&o[2],o[3]>>24&255,o[3]>>16&255,o[3]>>8&255,255&o[3],o[4]>>24&255,o[4]>>16&255,o[4]>>8&255,255&o[4]]}},94:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.unsafeStringify=r;var n,o=(n=e(392))&&n.__esModule?n:{default:n};const s=[];for(let t=0;t<256;++t)s.push((t+256).toString(16).slice(1));function r(t,i=0){return(s[t[i+0]]+s[t[i+1]]+s[t[i+2]]+s[t[i+3]]+"-"+s[t[i+4]]+s[t[i+5]]+"-"+s[t[i+6]]+s[t[i+7]]+"-"+s[t[i+8]]+s[t[i+9]]+"-"+s[t[i+10]]+s[t[i+11]]+s[t[i+12]]+s[t[i+13]]+s[t[i+14]]+s[t[i+15]]).toLowerCase()}i.default=function(t,i=0){const e=r(t,i);if(!(0,o.default)(e))throw TypeError("Stringified UUID is invalid");return e}},922:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,o=(n=e(827))&&n.__esModule?n:{default:n},s=e(94);let r,a,h=0,c=0;i.default=function(t,i,e){let n=i&&e||0;const l=i||new Array(16);let p=(t=t||{}).node||r,u=void 0!==t.clockseq?t.clockseq:a;if(null==p||null==u){const i=t.random||(t.rng||o.default)();null==p&&(p=r=[1|i[0],i[1],i[2],i[3],i[4],i[5]]),null==u&&(u=a=16383&(i[6]<<8|i[7]))}let d=void 0!==t.msecs?t.msecs:Date.now(),f=void 0!==t.nsecs?t.nsecs:c+1;const g=d-h+(f-c)/1e4;if(g<0&&void 0===t.clockseq&&(u=u+1&16383),(g<0||d>h)&&void 0===t.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=d,c=f,a=u,d+=122192928e5;const y=(1e4*(268435455&d)+f)%4294967296;l[n++]=y>>>24&255,l[n++]=y>>>16&255,l[n++]=y>>>8&255,l[n++]=255&y;const m=d/4294967296*1e4&268435455;l[n++]=m>>>8&255,l[n++]=255&m,l[n++]=m>>>24&15|16,l[n++]=m>>>16&255,l[n++]=u>>>8|128,l[n++]=255&u;for(let t=0;t<6;++t)l[n+t]=p[t];return i||(0,s.unsafeStringify)(l)}},964:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=s(e(137)),o=s(e(489));function s(t){return t&&t.__esModule?t:{default:t}}var r=(0,n.default)("v3",48,o.default);i.default=r},137:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.URL=i.DNS=void 0,i.default=function(t,i,e){function n(t,n,r,a){var h;if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));const i=[];for(let e=0;e<t.length;++e)i.push(t.charCodeAt(e));return i}(t)),"string"==typeof n&&(n=(0,s.default)(n)),16!==(null===(h=n)||void 0===h?void 0:h.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+t.length);if(c.set(n),c.set(t,n.length),c=e(c),c[6]=15&c[6]|i,c[8]=63&c[8]|128,r){a=a||0;for(let t=0;t<16;++t)r[a+t]=c[t];return r}return(0,o.unsafeStringify)(c)}try{n.name=t}catch(t){}return n.DNS=r,n.URL=a,n};var n,o=e(94),s=(n=e(384))&&n.__esModule?n:{default:n};const r="6ba7b810-9dad-11d1-80b4-00c04fd430c8";i.DNS=r;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";i.URL=a},509:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=r(e(207)),o=r(e(827)),s=e(94);function r(t){return t&&t.__esModule?t:{default:t}}i.default=function(t,i,e){if(n.default.randomUUID&&!i&&!t)return n.default.randomUUID();const r=(t=t||{}).random||(t.rng||o.default)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i){e=e||0;for(let t=0;t<16;++t)i[e+t]=r[t];return i}return(0,s.unsafeStringify)(r)}},669:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=s(e(137)),o=s(e(32));function s(t){return t&&t.__esModule?t:{default:t}}var r=(0,n.default)("v5",80,o.default);i.default=r},392:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,o=(n=e(900))&&n.__esModule?n:{default:n};i.default=function(t){return"string"==typeof t&&o.default.test(t)}},108:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,o=(n=e(392))&&n.__esModule?n:{default:n};i.default=function(t){if(!(0,o.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}}},i={};function e(n){var o=i[n];if(void 0!==o)return o.exports;var s=i[n]={exports:{}};return t[n](s,s.exports,e),s.exports}e.d=(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},e.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i);var n={};(()=>{e.d(n,{l2:()=>Lt,Oj:()=>qt,Pp:()=>Rt,UJ:()=>Gt,yq:()=>Ut,hM:()=>Bt,dh:()=>Ft,jG:()=>zt,lW:()=>Wt,sz:()=>Ht});var t=function(){var t,i=!1;return t=navigator.userAgent||navigator.vendor,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(i=!0),i},i=e(593);i.v1,i.v3;const o=i.v4;i.v5,i.zR,i.i8,i.Gu,i.Pz,i.Qc;const s=function(){function t(){}return t.genId=function(){return o()},t}();var r=function(){return r=Object.assign||function(t){for(var i,e=1,n=arguments.length;e<n;e++)for(var o in i=arguments[e])Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);return t},r.apply(this,arguments)},a=10,h=8;const c=function(){function t(){}var i;return t.getBirdImageCords=function(t,i,e){var n={x:0,y:231,width:62,height:36};return t?"left"===e?0===i?n.x=397:1===i?n.x=245:2===i&&(n.x=316):0===i?n.x=620:1===i?n.x=470:2===i&&(n.x=541):0===i?n.x=2:1===i?n.x=164:2===i&&(n.x=83),n},i=t,t.imageMap={0:"../../img/numbers/0.png",1:"../../img/numbers/1.png",2:"../../img/numbers/2.png",3:"../../img/numbers/3.png",4:"../../img/numbers/4.png",5:"../../img/numbers/5.png",6:"../../img/numbers/6.png",7:"../../img/numbers/7.png",8:"../../img/numbers/8.png",9:"../../img/numbers/9.png",stone:"../../img/stone.gif",life:"../../img/fred-life.png","item placeholder":"../../img/item-placeholder.png","bag stone stack":"../../img/stone-stack.png","bag hat":"../../img/hat.png","bag shield":"../../img/shield.png","bag oxygen":"../../img/oxygen-game.png"},t.getImage=function(t){return i.imageMap[t]},t.getPlatformImageCords=function(t,i,e){var n={x:0,y:758},o={width:140,height:51};if("a"===t){if("right"===e)throw new Error("Platform A can have only left direction");if("s"===i)n.x=0,o={width:140,height:51};else{if("m"!==i)throw new Error("Plarform A max size is M");n.x=156,o={width:205,height:60}}}else"b"===t&&("s"===i?"left"===e?(n.x=1103,o={width:102,height:80}):(n.x=1226,o={width:102,height:80}):"m"===i?(n.x=381,o={width:171,height:80}):"l"===i?(n.x=572,o={width:250,height:80}):"lg"===i&&(n.x=847,o={width:236,height:80}));return r(r({},n),o)},t.getPlayerImageCords=function(t,i,e,n,o){var s={x:2,y:0,height:129,width:70};return n?s.x="right"===o?i<a?802:713:i<a?976:889:t?"right"===o?e<=h?s.x=91:e<=2*h?s.x=268:e<=3*h&&(s.x=180):e<=h?s.x=446:e<=2*h?s.x=624:e<=3*h&&(s.x=535):s.x="right"===o?2:357,s},t.getStoneImageCords=function(){return{x:1065,y:0,width:27,height:26}},t.getVaseCords=function(){return{x:2,y:1103,width:61,height:58}},t.getItemImageCords=function(t){var i={x:0,y:0,width:0,height:0};return"extra life"===t?i={x:83,y:1106,width:30,height:57}:"dynamite"===t?i={x:134,y:1108,width:27,height:53}:"hat"===t?i={x:181,y:1107,width:53,height:53}:"oxygen"===t?i={x:254,y:1110,width:46,height:53}:"shield"===t?i={x:320,y:1112,width:39,height:51}:"stone stack"===t&&(i={x:379,y:1112,width:85,height:51}),i},t.getFrogImageCords=function(t,i,e){var n={x:0,y:154,width:60,height:55},o=e%4;return i?t?0===o?n.x=242:1===o||2===o?n.x=306:3===o&&(n.x=82):0===o?n.x=457:1===o||2===o?n.x=529:3===o&&(n.x=385):0===o?n.x=2:1===o?n.x=82:2===o?n.x=162:3===o&&(n.x=82),n},t.getFlameImgCords=function(t,i){var e={x:0,y:1186,width:78,height:88};return"right"===i?0===t?e.x=1:1===t?e.x=99:2===t&&(e.x=200):0===t?e.x=297:1===t?e.x=395:2===t&&(e.x=496),e},t.getCactusImageCords=function(t,i){var e={x:0,y:287,width:0,height:0};return""===i?(e.width=69,e=r(r({},e),"lg"===t?{x:0,height:436}:"l"===t?{x:95,height:364}:"m"===t?{x:392,height:212}:"s"===t?{x:486,height:135}:{x:574,height:45})):"left"===i?(e.width=76,e=r(r({},e),"s"===t?{x:662,height:125}:{x:280,height:206})):"right"===i&&(e.width=76,e=r(r({},e),"s"===t?{x:758,height:125}:{x:184,height:206})),e},t.getBirdProjectileImageCords=function(){return{x:689,y:232,width:7,height:17}},t.getDeathAnimImageCords=function(t,i){return"player"===t?0===i?{x:1113,y:0,height:109,width:64}:{x:1193,y:0,height:109,width:64}:0===i?{x:2,y:1015,width:69,height:65}:{x:91,y:1015,width:69,height:65}},t.getGameStoneImageCords=function(){return{x:2,y:952,width:50,height:45}},t.getFragilePlatformImage=function(t){return t?{x:1446,y:755,width:63,height:75}:{x:1342,y:758,width:103,height:80}},t.getGrassImageCords=function(t,i){var e={x:0,y:849,height:0,width:60};return r(r({},e),i?"s"===t?{x:235,height:26,width:27}:{x:282,height:60}:"s"===t?{x:171,height:35}:"m"===t?{x:82,height:49}:{x:2,height:83})},t}();var l=function(){return l=Object.assign||function(t){for(var i,e=1,n=arguments.length;e<n;e++)for(var o in i=arguments[e])Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);return t},l.apply(this,arguments)},p=.5;const u=function(){function t(t,i,e){this.id=s.genId(),this.position={x:t,y:i},this.startPos=l({},this.position),this.type=e,this.anim={phase:0,incrementer:0},this.assignSize()}return t.prototype.assignSize=function(){this.width=50,"player"===this.type?this.height=90:"enemy"===this.type&&(this.height=50)},t.prototype.draw=function(){this.graphics={cords:c.getDeathAnimImageCords(this.type,this.anim.phase)},Lt.c.drawImage(Wt,this.graphics.cords.x,this.graphics.cords.y,this.graphics.cords.width,this.graphics.cords.height,this.position.x,this.position.y,this.width,this.height),this.anim.incrementer+=1,this.anim.incrementer>=8&&(this.anim.incrementer=0,1===this.anim.phase?this.anim.phase-=1:this.anim.phase+=1),this.width-=p,this.height-=p,this.position.x+=Math.round(.25),this.position.y+=Math.round(.25),this.width<=30&&this.remove()},t.prototype.remove=function(){var t=this,i=Gt.nonCollidable.findIndex((function(i){return i.id===t.id}));Gt.nonCollidable.splice(i,1)},t.prototype.checkIfPlayerPicked=function(){},t}();const d=function(){function t(){this.flameDirection=Bt.turnDirection,this.height=60,this.width=50;var t="left"===this.flameDirection?Bt.position.x-this.width:Bt.position.x+Bt.width;this.position={x:t,y:Bt.position.y+Math.round(Bt.height/10)+Bt.velocity.y},this.anim={phase:0,incrementer:0},this.class="flame"}return t.prototype.draw=function(){this.anim.incrementer+=1,this.anim.incrementer>=20&&(this.anim.phase>=2?this.anim.phase=0:this.anim.phase+=1,this.anim.incrementer=0),this.graphics={cords:c.getFlameImgCords(this.anim.phase,this.flameDirection)},Lt.c.drawImage(Wt,this.graphics.cords.x,this.graphics.cords.y,this.graphics.cords.width,this.graphics.cords.height,this.position.x,this.position.y,this.width,this.height),this.checkEnemyCollision()},t.prototype.update=function(){this.flameDirection=Bt.turnDirection;var t="left"===this.flameDirection?Bt.position.x-this.width:Bt.position.x+Bt.width;this.position={x:t,y:Bt.position.y+Math.round(Bt.height/10)+Bt.velocity.y}},t.prototype.checkEnemyCollision=function(){for(var t=0,i=Gt.collidable;t<i.length;t++){var e=i[t];"enemy"===e.type&&"cactus"!==e.class&&this.position.x+this.width>=e.position.x&&this.position.x<=e.position.x+e.width&&this.position.y<=e.position.y+e.height&&this.position.y+this.height>=e.position.y&&(e.remove(),Ut.addScorePoints(50))}for(var n=0,o=Gt.nonCollidable;n<o.length;n++){var s=o[n];"vase"===s.type&&this.position.x+this.width>=s.position.x&&this.position.x<=s.position.x+s.width&&this.position.y<=s.position.y+s.height&&this.position.y+this.height>=s.position.y&&s.remove()}},t.prototype.remove=function(){var t=this,i=Gt.playerFriendly.findIndex((function(i){return i.class===t.class}));Gt.playerFriendly.splice(i,1)},t}();var f=function(){return f=Object.assign||function(t){for(var i,e=1,n=arguments.length;e<n;e++)for(var o in i=arguments[e])Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);return t},f.apply(this,arguments)},g=32,y=-6,m=10,v=18,w=2,b=2;const x=function(){function t(){this.width=15,this.turnDirection=Bt.turnDirection;var t="left"===this.turnDirection?Bt.position.x-this.width:Bt.position.x+Bt.width;this.height=15,this.position={x:t,y:Bt.position.y+Math.round(Bt.height/4)},this.startPos=f({},this.position),this.velocity={x:g,y},this.class="stone",this.graphics={cords:c.getStoneImageCords()}}return t.prototype.draw=function(){this.checkCollision(),this.velocity.x>2*m&&(this.velocity.x-=w),this.velocity.y<v&&(this.velocity.y+=b),"right"===this.turnDirection?this.position.x+=this.velocity.x:this.position.x-=this.velocity.x,this.velocity.y>-4&&(this.position.y+=this.velocity.y),Lt.c.drawImage(Wt,this.graphics.cords.x,this.graphics.cords.y,this.graphics.cords.width,this.graphics.cords.height,this.position.x,this.position.y,this.width,this.height)},t.prototype.checkCollision=function(){this.height+this.position.y>=Lt.canvasProps.height&&(this.remove(),Bt.stoneThrown=!1);for(var t=0,i=Gt.collidable;t<i.length;t++){var e=i[t];this.position.x+this.width>=e.position.x&&this.position.x<=e.position.x+e.width&&this.position.y+this.height>=e.position.y&&this.position.y<=e.position.y+e.height&&(this.remove(),Bt.stoneThrown=!1,"enemy"===e.type&&"cactus"!==e.class&&(e.remove(),Ut.addScorePoints(50)))}for(var n=0,o=Gt.nonCollidable;n<o.length;n++){var s=o[n];"vase"===s.type&&this.position.x+this.width>=s.position.x&&this.position.x<=s.position.x+s.width&&this.position.y+this.height>=s.position.y&&this.position.y<=s.position.y+s.height&&(this.remove(),Bt.stoneThrown=!1,s.remove())}},t.prototype.remove=function(){var t=this,i=Gt.playerFriendly.findIndex((function(i){return i.class===t.class}));Gt.playerFriendly.splice(i,1)},t}();var P=function(){return P=Object.assign||function(t){for(var i,e=1,n=arguments.length;e<n;e++)for(var o in i=arguments[e])Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);return t},P.apply(this,arguments)},I={x:5,y:1},k={x:100,y:100},C={min:300,max:400};const O=function(){function t(t,i,e){this.position=P({},k),this.velocity=I,this.width=50,this.height=90,this.jumpHeight=30,this.floating={isfloating:!1,direction:"",animPhase:1},this.turnDirection="right",this.stoneThrown=!1,this.flame={launched:!1,obj:null,incrementer:0},this.lastPos={x:0,y:0},this.weaponChosen={timeout:0,type:"stones",stoneDelay:0},this.animProps={moving:!1,animJumpPhase:0,animMovePhase:0,previousDirection:"right"},this.alpha={in:!1,anim:0},this.death=!1,C.max=e-300}return t.prototype.draw=function(){var t;t=this.alpha.in?1===this.alpha.anim?Wt:qt:Wt,this.graphics={cords:c.getPlayerImageCords(this.animProps.moving,this.animProps.animJumpPhase,this.animProps.animMovePhase,this.floating.isfloating,this.turnDirection)},Lt.c.drawImage(t,this.graphics.cords.x,this.graphics.cords.y,this.graphics.cords.width,this.graphics.cords.height,this.position.x,this.position.y,this.width,this.height)},t.prototype.update=function(){this.death||(this.captureMovement(),this.checkCollisions(),this.position.y+this.height+this.velocity.y<=Lt.canvas.height?(this.position.y+=this.velocity.y,this.velocity.y+=Lt.gravity):(this.velocity.y=0,this.position.y=Lt.canvas.height-this.height,this.floating.isfloating=!1),this.draw())},t.prototype.captureMovement=function(){this.manageWeaponUsage(),this.blockOptions(),Ft.right&&!this.floating.isfloating&&(this.turnDirection="right",Ft.left||(this.animProps.moving=!0),this.turnDirection!==this.animProps.previousDirection||this.animProps.animMovePhase>=24?this.animProps.animMovePhase=0:this.animProps.animMovePhase+=1,this.animProps.previousDirection="right",this.collisionChk("right")||(Lt.renderer.playerAbstractionPos.x+=this.velocity.x,this.position.x<C.max?this.position.x+=this.velocity.x:this.paralaxMoveAll("right"))),Ft.left&&!this.floating.isfloating&&(this.turnDirection="left",Ft.right||(this.animProps.moving=!0),this.turnDirection!==this.animProps.previousDirection||this.animProps.animMovePhase>=24?this.animProps.animMovePhase=0:this.animProps.animMovePhase+=1,this.animProps.previousDirection="left",this.collisionChk("left")||(Lt.renderer.playerAbstractionPos.x-=this.velocity.x,this.position.x>C.min?this.position.x-=this.velocity.x:this.paralaxMoveAll("left"))),Ft.up&&!this.floating.isfloating&&(this.floating.isfloating=!0,Ft.left&&!Ft.right?this.floating.direction="left":Ft.right&&!Ft.left?this.floating.direction="right":this.floating.direction="",this.velocity.y-=this.jumpHeight),this.floating.isfloating&&"left"===this.floating.direction?(zt.playerAbstractionPos.x-=this.velocity.x,this.collisionChk("left")||(this.position.x<C.min?this.paralaxMoveAll("left"):this.position.x-=this.velocity.x),this.animProps.animJumpPhase+=1):this.floating.isfloating&&"right"===this.floating.direction?(zt.playerAbstractionPos.x+=this.velocity.x,this.collisionChk("right")||(this.position.x>C.max?this.paralaxMoveAll("right"):this.position.x+=this.velocity.x),this.animProps.animJumpPhase+=1):this.animProps.animJumpPhase+=1,this.floating.isfloating||(this.floating.direction="",this.animProps.animJumpPhase=0),(Ft.left&&Ft.right||!Ft.left&&!Ft.right)&&(this.animProps.moving=!1)},t.prototype.checkCollisions=function(){for(var t=0,i=Gt.collidable;t<i.length;t++){var e=i[t];this.position.y+this.height<=e.position.y&&this.position.y+this.height+this.velocity.y>=e.position.y&&this.position.x+this.width>e.position.x&&this.position.x<e.position.x+e.width&&("platform"===e.type?(this.velocity.y=0,this.position.y=e.position.y-this.height,this.floating.isfloating=!1,"fragile platform"===e.class&&e.break()):"enemy"===e.type&&Bt.die()),this.position.y+this.velocity.y<e.position.y+e.height&&this.position.y+this.height>e.position.y&&this.position.x+this.width>e.position.x&&this.position.x<e.position.x+e.width&&("platform"===e.type?(this.position.y=e.position.y+e.height,this.velocity.y=1):"enemy"===e.type&&this.die())}},t.prototype.die=function(){var t=this;if(!this.alpha.in){var i=Ut.bag.items.find((function(t){return"bag hat"===t.class}));if(i&&i.use(),!this.alpha.in&&!this.death){var e=new u(this.position.x,this.position.y,"player");Gt.nonCollidable.push(e),this.death=!0,setTimeout((function(){return i=t,e=void 0,o=function(){return function(t,i){var e,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=i.call(t,r)}catch(t){s=[6,t],n=0}finally{e=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(t){switch(t.label){case 0:return[4,zt.descrollAll()];case 1:return t.sent(),zt.descroll.step=1e3,zt.trackInvisible(!0),this.position=P({},k),this.velocity.y=0,this.floating.isfloating=!0,this.floating.direction="",Ut.updateLives(Ut.lives.value-1),Ut.resetRunScore(),this.death=!1,[2]}}))},new((n=void 0)||(n=Promise))((function(t,s){function r(t){try{h(o.next(t))}catch(t){s(t)}}function a(t){try{h(o.throw(t))}catch(t){s(t)}}function h(i){i.done?t(i.value):function(t){return t instanceof n?t:new n((function(i){i(t)}))}(i.value).then(r,a)}h((o=o.apply(i,e||[])).next())}));var i,e,n,o}),2e3)}}},t.prototype.manageWeaponUsage=function(){var t=this;if(Ft.e&&0===this.weaponChosen.timeout&&("stones"===this.weaponChosen.type&&Ut.oxygen.value>0?this.weaponChosen.type="fire":"fire"===this.weaponChosen.type&&Ut.stones.value>0&&(this.weaponChosen.type="stones"),this.weaponChosen.timeout=1,setTimeout((function(){t.weaponChosen.timeout=0}),500)),Ft.f)if("stones"!==this.weaponChosen.type||this.stoneThrown||0!==this.weaponChosen.stoneDelay){if("fire"===this.weaponChosen.type){if(0===Ut.oxygen.value)return;if(this.flame.launched?this.flame.obj.update():(this.flame.obj=new d,Gt.playerFriendly.push(this.flame.obj),this.flame.launched=!0),3===this.flame.incrementer){if(Ut.updateOxygen(Ut.oxygen.value-1),0===Ut.oxygen.value){var i=Ut.bag.items.find((function(t){return"bag oxygen"===t.class}));i?i.use():(this.flame.obj.remove(),this.weaponChosen.type="stones")}this.flame.incrementer=0}this.flame.incrementer+=1}}else{if(Ut.stones.value<1)return;this.stoneThrown=!0;var e=new x;if(Gt.playerFriendly.push(e),Ut.updateStones(Ut.stones.value-1),0===Ut.stones.value){var n=Ut.bag.items.find((function(t){return"bag stone stack"===t.class}));n&&n.use()}this.weaponChosen.stoneDelay=1,0===Ut.stones.value&&(this.weaponChosen.type="fire"),setTimeout((function(){t.weaponChosen.stoneDelay=0}),1e3)}else"fire"===this.weaponChosen.type&&this.flame.launched&&(this.flame.obj.remove(),this.flame.launched=!1)},t.prototype.blockOptions=function(){this.position.y>this.lastPos.y&&(this.floating.isfloating=!0),this.lastPos.y=this.position.y},t.prototype.paralaxMoveAll=function(t){if("right"===t){for(var i=0,e=Gt.collidable;i<e.length;i++)e[i].position.x-=this.velocity.x;for(var n=0,o=Gt.playerFriendly;n<o.length;n++)o[n].position.x-=this.velocity.x;for(var s=0,r=Gt.nonCollidable;s<r.length;s++)r[s].position.x-=this.velocity.x;for(var a=0,h=Ht;a<h.length;a++)h[a].position.x-=this.velocity.x}else{for(var c=0,l=Gt.collidable;c<l.length;c++)l[c].position.x+=this.velocity.x;for(var p=0,u=Gt.playerFriendly;p<u.length;p++)u[p].position.x+=this.velocity.x;for(var d=0,f=Gt.nonCollidable;d<f.length;d++)f[d].position.x+=this.velocity.x;for(var g=0,y=Ht;g<y.length;g++)y[g].position.x+=this.velocity.x}},t.prototype.collisionChk=function(t){if("right"===t){for(var i=0,e=Gt.collidable;i<e.length;i++)if("platform"===(s=e[i]).type&&this.position.x<s.position.x+s.width&&this.position.x+this.width>=s.position.x&&this.position.y<s.position.y+s.height&&this.position.y+this.height>s.position.y)return!0}else for(var n=0,o=Gt.collidable;n<o.length;n++){var s;if("platform"===(s=o[n]).type&&this.position.x<=s.position.x+s.width&&this.position.x+this.width>s.position.x&&this.position.y<s.position.y+s.height&&this.position.y+this.height>s.position.y)return!0}},t}(),_=function(){function t(){this.backgroundMusic=new Audio("audio/soundtrack.mp3")}return t.prototype.play=function(){this.backgroundMusic.loop=!0,this.backgroundMusic.play()},t.prototype.stop=function(){this.backgroundMusic.pause()},t}(),j=function(){function t(t,i){this.position={x:t,y:Rt.height-i},this.id=s.genId(),this.deleted=!1}return t.prototype.draw=function(){Lt.c.fillStyle="orange",Lt.c.fillRect(this.position.x,this.position.y,this.width,this.height)},t.prototype.remove=function(){var t=this,i=zt.breakPoints[zt.currentBreakPoint].enemies.findIndex((function(i){return i.id===t.id}));zt.breakPoints[zt.currentBreakPoint].enemies.splice(i,1);var e=Gt.collidable.findIndex((function(i){return i.id===t.id}));Gt.collidable.splice(e,1);var n=new u(this.position.x,this.position.y,"enemy");Gt.nonCollidable.push(n)},t.prototype.track=function(){var t=this,i=Gt.collidable.findIndex((function(i){return i.id===t.id}));Gt.collidable.splice(i,1),Ht.push(this)},t.prototype.untrack=function(){var t=this;Gt.collidable.push(this);var i=Ht.findIndex((function(i){return i.id===t.id}));Ht.splice(i,1)},t}();var M,S=(M=function(t,i){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},M(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}M(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),T=function(){return T=Object.assign||function(t){for(var i,e=1,n=arguments.length;e<n;e++)for(var o in i=arguments[e])Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);return t},T.apply(this,arguments)},E={x:3,y:1},A=function(t){function i(i,e,n,o){var s=t.call(this,i,e)||this;return s.width=45,s.height=45,s.position.x-=s.height,s.startPos=T({},s.position),s.type="enemy",s.class="frog",s.velocity=E,s.isFloating=!0,s.isMoving=!1,s.stayTimeout=50,s.movementRange={min:n,max:o},s.abstractPos={x:0,y:0},s.movingRight=!0,s.isMoving=!1,s.anim={phase:0,incrementer:0},s.visible=!0,s}return S(i,t),i.prototype.update=function(){this.position.y+this.height+this.velocity.y<=Lt.canvas.height?(this.position.y+=this.velocity.y,this.velocity.y+=Lt.gravity,this.isFloating=!0):(this.velocity.y=0,this.position.y=Lt.canvas.height-this.height,this.isFloating=!1),this.checkCollision(),this.abstractPos.x<=this.movementRange.min&&0===this.stayTimeout&&(this.movingRight=!0,this.isMoving=!1,this.stayTimeout=50),this.abstractPos.x>=this.movementRange.max&&0===this.stayTimeout&&(this.movingRight=!1,this.isMoving=!1,this.stayTimeout=50),this.stayTimeout>0?this.stayTimeout-=1:this.isMoving=!0,this.movingRight&&0===this.stayTimeout&&(this.abstractPos.x+=this.velocity.x,this.position.x+=this.velocity.x),this.movingRight||0!==this.stayTimeout||(this.abstractPos.x-=this.velocity.x,this.position.x-=this.velocity.x);var t=Lt.player;this.position.x<=t.position.x+t.width&&this.position.x+this.width>=t.position.x&&this.position.y<=t.position.y+t.height&&this.position.y+this.height>=t.position.y&&t.die(),this.isMoving?this.anim.incrementer+=1:this.anim.incrementer+=.7,this.anim.incrementer>=10&&(this.anim.incrementer=0,this.anim.phase+=1),this.graphics={cords:c.getFrogImageCords(!this.movingRight,this.isMoving,this.anim.phase)},Lt.c.drawImage(Wt,this.graphics.cords.x,this.graphics.cords.y,this.graphics.cords.width,this.graphics.cords.height,this.position.x,this.position.y,this.width,this.height)},i.prototype.checkCollision=function(){for(var t=0,i=Gt.collidable;t<i.length;t++){var e=i[t];"platform"===e.type&&this.position.y+this.height>=e.position.y&&this.position.y<=e.position.y+e.height&&this.position.x+this.width>=e.position.x&&this.position.x<=e.position.x+e.width&&(this.velocity.y=0,this.position.y=e.position.y-this.height)}},i}(j);const D=A;var R=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),B=function(){return B=Object.assign||function(t){for(var i,e=1,n=arguments.length;e<n;e++)for(var o in i=arguments[e])Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);return t},B.apply(this,arguments)};const U=function(t){function i(i,e,n,o){var s=t.call(this,i,e)||this;return s.size=n,s.assignSize(),s.type="enemy",s.class="cactus",s.position.y-=s.height,s.startPos=B({},s.position),s.direction=o,s.graphics={cords:c.getCactusImageCords(s.size,s.direction)},s.visible=!0,s}return R(i,t),i.prototype.assignSize=function(){switch(this.width=50,this.size){case"sm":this.height=60;break;case"s":this.height=120;break;case"m":this.height=180;break;case"l":this.height=240}},i.prototype.draw=function(){Lt.c.drawImage(Wt,this.graphics.cords.x,this.graphics.cords.y,this.graphics.cords.width,this.graphics.cords.height,this.position.x,this.position.y,this.width,this.height)},i}(j);const z=function(){function t(){}return t.getPlatformSize=function(t,i){var e={width:0,height:0};if("a"===t)if(e.height=40,"s"===i)e.width=100;else{if("m"!==i)throw new Error("Plarform A max size is M");e.width=150}else"b"===t&&(e.height=60,"s"===i?e.width=110:"m"===i?e.width=160:"l"===i?e.width=210:"lg"===i&&(e.width=230));return e},t.getGrassSize=function(t,i){var e={width:0,height:0};return i?(e.width=25,e.height="s"===t?30:60):(e.width=40,"s"===t?e.height=30:"m"===t?e.height=50:"l"===t&&(e.height=70)),e},t}();var L=function(){return L=Object.assign||function(t){for(var i,e=1,n=arguments.length;e<n;e++)for(var o in i=arguments[e])Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);return t},L.apply(this,arguments)};const F=function(){function t(t,i,e,n,o){this.id=s.genId();var r=z.getPlatformSize(e,n);this.width=r.width,this.height=r.height,this.position={x:t,y:Rt.height-i-this.height},this.startPos=L({},this.position),this.type="platform",this.class="platform",this.graphics={cords:c.getPlatformImageCords(e,n,o),type:e,length:n,turnDirection:o},this.visible=!1,this.checkVisibility()}return t.prototype.draw=function(){Lt.c.drawImage(Wt,this.graphics.cords.x,this.graphics.cords.y,this.graphics.cords.width,this.graphics.cords.height,this.position.x,this.position.y,this.width,this.height)},t.prototype.checkVisibility=function(){(this.position.x+this.width>=-300||this.position.x<=Rt.width+300)&&(this.visible=!0)},t.prototype.track=function(){var t=this,i=Gt.collidable.findIndex((function(i){return i.id===t.id}));Gt.collidable.splice(i,1),Ht.push(this)},t.prototype.untrack=function(){var t=this;Gt.collidable.push(this);var i=Ht.findIndex((function(i){return i.id===t.id}));Ht.splice(i,1)},t}(),G=function(){this.type="bag item",this.type="bag item"};var H=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();const W=function(t){function i(){var i=t.call(this)||this;return i.class="bag stone stack",Ut.addItem(i),0===Ut.stones.value&&i.use(),i}return H(i,t),i.prototype.use=function(){Ut.updateStones(10),this.remove()},i.prototype.remove=function(){Ut.deleteItem(this)},i}(G);var q=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();const V=function(t){function i(){var i=t.call(this)||this;return i.class="bag oxygen",Ut.addItem(i),0===Ut.oxygen.value&&i.use(),i}return q(i,t),i.prototype.use=function(){Ut.updateOxygen(40),this.remove()},i.prototype.remove=function(){Ut.deleteItem(this)},i}(G);var J=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();const N=function(t){function i(){var i=t.call(this)||this;return i.use(),i}return J(i,t),i.prototype.use=function(){Gt.collidable.forEach((function(t){"enemy"===t.type&&"cactus"!==t.class&&t.position.x>0&&t.position.x+t.width<Rt.width&&(t.remove(),Ut.addScorePoints(50))}))},i}(G);var Y=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();const Q=function(t){function i(){var i=t.call(this)||this;return i.class="bag hat",i.useTimes=3,i.intervalIncrementer=0,i.fadeOut=!1,Ut.addItem(i),i.img=Ut.bag.itemsImgs.find((function(t){return t.alt===i.class})),i}return Y(i,t),i.prototype.use=function(){var t=this;this.useTimes-=1,Bt.alpha.in=!0;var i=setInterval((function(){1===Bt.alpha.anim?Bt.alpha.anim-=1:Bt.alpha.anim+=1,t.intervalIncrementer>=5&&(clearInterval(i),t.intervalIncrementer=0,Bt.alpha.in=!1,Bt.alpha.anim=0),t.intervalIncrementer+=1}),1e3);1===this.useTimes&&this.launchOpacityInterval(),0===this.useTimes&&this.remove()},i.prototype.remove=function(){Ut.deleteItem(this)},i.prototype.launchOpacityInterval=function(){var t=this,i=setInterval((function(){t.fadeOut?t.img.style.opacity="0.2":t.img.style.opacity="1",t.fadeOut=!t.fadeOut,0===t.useTimes&&clearInterval(i)}),500)},i}(G);var $=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();const K=function(t){function i(){var i=t.call(this)||this;return i.class="bag shield",i.expiresIn=15,Ut.addItem(i),i.img=null,i.fadeOut=!1,i.fadingInterval=null,i.startExpiring(),i.assignImage(),i}return $(i,t),i.prototype.remove=function(){Ut.deleteItem(this)},i.prototype.startExpiring=function(){var t=this;Bt.alpha.in=!0;var i=setInterval((function(){t.expiresIn-=1,1===Bt.alpha.anim?Bt.alpha.anim-=1:Bt.alpha.anim+=1,t.expiresIn<Math.round(5)&&(t.fadingInterval||(t.fadingInterval=setInterval((function(){t.fadeOut?(t.img.style.opacity="0.2",t.fadeOut=!1):(t.img.style.opacity="1",t.fadeOut=!0)}),500))),t.expiresIn<=0&&(clearInterval(i),clearInterval(t.fadingInterval),t.remove(),Bt.alpha.in=!1,Bt.alpha.anim=0)}),1e3)},i.prototype.assignImage=function(){var t=this;this.img=Ut.bag.itemsImgs.find((function(i){return i.alt===t.class}))},i}(G),X=function(){function t(t,i,e){var n=this;this.class=e,this.id=s.genId(),this.position={x:t,y:i},this.width=50,this.height=50,this.type="item",this.graphics={cords:c.getItemImageCords(this.class)},"extra life"===this.class&&(this.width=25),setTimeout((function(){n.remove()}),1e4)}return t.prototype.draw=function(){Lt.c.drawImage(Wt,this.graphics.cords.x,this.graphics.cords.y,this.graphics.cords.width,this.graphics.cords.height,this.position.x,this.position.y,this.width,this.height)},t.prototype.checkIfPlayerPicked=function(){this.position.x<=Bt.position.x+Bt.width&&this.position.x+this.width>=Bt.position.x&&this.position.y+this.height>=Bt.position.y&&this.position.y<=Bt.position.y+Bt.height&&this.pick()},t.prototype.pick=function(){this.remove(),"stone stack"===this.class?new W:"oxygen"===this.class?new V:"dynamite"===this.class?new N:"extra life"===this.class?Ut.updateLives(Ut.lives.value+1):"hat"===this.class?new Q:"shield"===this.class&&new K,Ut.addScorePoints(30)},t.prototype.remove=function(){var t=this,i=Gt.nonCollidable.findIndex((function(i){return i.id===t.id}));Gt.nonCollidable.splice(i,1)},t}();var Z=function(){return Z=Object.assign||function(t){for(var i,e=1,n=arguments.length;e<n;e++)for(var o in i=arguments[e])Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);return t},Z.apply(this,arguments)};const tt=function(){function t(t,i){this.id=s.genId(),this.graphics={cords:c.getVaseCords()},this.width=50,this.height=50,this.position={x:t,y:Rt.height-i-this.height-10},this.startPos=Z({},this.position),this.getRandomItem(),this.type="vase",this.visible=!1,this.checkVisibility()}return t.prototype.draw=function(){Lt.c.drawImage(Wt,this.graphics.cords.x,this.graphics.cords.y,this.graphics.cords.width,this.graphics.cords.height,this.position.x,this.position.y,this.width,this.height)},t.prototype.getRandomItem=function(){var t=Math.round(100*Math.random());this.itemInside=t<25?"stone stack":t<40?"extra life":t<50?"oxygen":t<70?"cactus":t<80?"hat":t<90?"shield":"dynamite"},t.prototype.remove=function(){var t=this,i=Gt.nonCollidable.findIndex((function(i){return i.id===t.id}));Gt.nonCollidable.splice(i,1),this.replaceWithItem()},t.prototype.replaceWithItem=function(){if("cactus"===this.itemInside){var t=new U(this.position.x,Lt.canvasProps.height-this.position.y-this.height-10,"s","");Gt.collidable.push(t),setTimeout((function(){var i=Gt.collidable.findIndex((function(i){return i.id===t.id}));Gt.collidable.splice(i,1)}),6e3)}else{var i=new X(this.position.x,this.position.y,this.itemInside);Gt.nonCollidable.push(i)}},t.prototype.checkVisibility=function(){},t.prototype.track=function(){var t=this,i=Gt.nonCollidable.findIndex((function(i){return i.id===t.id}));Gt.nonCollidable.splice(i,1),Ht.push(this)},t.prototype.untrack=function(){var t=this;Gt.nonCollidable.push(this);var i=Ht.findIndex((function(i){return i.id===t.id}));Ht.splice(i,1)},t}();var it=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),et=function(){return et=Object.assign||function(t){for(var i,e=1,n=arguments.length;e<n;e++)for(var o in i=arguments[e])Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);return t},et.apply(this,arguments)},nt={y:3};const ot=function(t){function i(i,e){var n=t.call(this,i,e)||this;return n.position={x:i,y:e},n.startPos=et({},n.position),n.width=8,n.height=25,n.class="bird projectile",n.type="enemy",n.velocity=nt,n.graphics={cords:c.getBirdProjectileImageCords()},n}return it(i,t),i.prototype.update=function(){this.position.y+=this.velocity.y,this.checkCollision(),Lt.c.drawImage(Wt,this.graphics.cords.x,this.graphics.cords.y,this.graphics.cords.width,this.graphics.cords.height,this.position.x,this.position.y,this.width,this.height)},i.prototype.checkCollision=function(){this.position.y+this.height>=Lt.canvasProps.height&&this.remove();for(var t=0,i=Gt.collidable;t<i.length;t++){var e=i[t];if("enemy"===e.type)return;this.position.y<=e.position.y+e.height&&this.position.y+this.height>=e.position.y&&this.position.x<=e.position.x+e.width&&this.position.x+this.width>=e.position.x&&this.remove()}},i.prototype.remove=function(){var t=this,i=Gt.collidable.findIndex((function(i){return i.id===t.id}));Gt.collidable.splice(i,1)},i}(j);var st=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),rt=function(){return rt=Object.assign||function(t){for(var i,e=1,n=arguments.length;e<n;e++)for(var o in i=arguments[e])Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);return t},rt.apply(this,arguments)},at={x:3,y:5};const ht=function(t){function i(i,e,n,o,s){void 0===s&&(s=!1);var r=t.call(this,i,e)||this;return r.class="bird",r.type="enemy",r.projectile={shots:s,delay:200},r.width=40,r.height=30,r.position.y-=r.height,r.startPos=rt({},r.position),r.velocity=at,r.anim={phase:0,incrementer:0},r.abstractPos={x:0,y:0},r.movement={isMoving:!1,direction:"right",range:{min:n,max:o},stayTimeout:50},r.visible=!0,r}return st(i,t),i.prototype.update=function(){"right"===this.movement.direction&&this.movement.isMoving?(this.position.x+=this.velocity.x,this.abstractPos.x+=this.velocity.x,this.abstractPos.x>=this.movement.range.max&&(this.movement.direction="left",this.movement.stayTimeout=50)):"left"===this.movement.direction&&this.movement.isMoving&&(this.position.x-=this.velocity.x,this.abstractPos.x-=this.velocity.x,this.abstractPos.x<=this.movement.range.min&&(this.movement.direction="right",this.movement.stayTimeout=50)),this.movement.stayTimeout>0?(this.movement.isMoving=!1,this.movement.stayTimeout-=1):this.movement.isMoving=!0,this.anim.incrementer>=10&&(this.anim.incrementer=0,this.anim.phase>=2?this.anim.phase=0:this.anim.phase+=1),this.anim.incrementer+=1,this.projectile.shots&&this.randomlyShotProjectile(),this.graphics={cords:c.getBirdImageCords(this.movement.isMoving,this.anim.phase,this.movement.direction)},Lt.c.drawImage(Wt,this.graphics.cords.x,this.graphics.cords.y,this.graphics.cords.width,this.graphics.cords.height,this.position.x,this.position.y,this.width,this.height)},i.prototype.randomlyShotProjectile=function(){if(this.projectile.delay>0)return this.projectile.delay-=1;if(!(Math.round(100*Math.random())>5)){var t=new ot(this.position.x+Math.round(this.width/2),this.position.y+this.height);Gt.collidable.push(t),this.projectile.delay=200}},i}(j);var ct=function(){return ct=Object.assign||function(t){for(var i,e=1,n=arguments.length;e<n;e++)for(var o in i=arguments[e])Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);return t},ct.apply(this,arguments)};const lt=function(){function t(t,i){this.id=s.genId(),this.type="pickable stone",this.width=30,this.height=30,this.position={x:t,y:Rt.height-i-this.height-5},this.startPos=ct({},this.position),this.graphics={cords:c.getGameStoneImageCords()},this.visible=!0}return t.prototype.draw=function(){Lt.c.drawImage(Wt,this.graphics.cords.x,this.graphics.cords.y,this.graphics.cords.width,this.graphics.cords.height,this.position.x,this.position.y,this.width,this.height)},t.prototype.use=function(){Ut.updateStones(Ut.stones.value+1),Ut.addScorePoints(10),this.remove()},t.prototype.remove=function(){var t=this,i=Gt.nonCollidable.findIndex((function(i){return i.id===t.id}));Gt.nonCollidable.splice(i,1);var e=zt.breakPoints[zt.currentBreakPoint].neutral.findIndex((function(i){return i.id===t.id}));-1!==e&&zt.breakPoints[zt.currentBreakPoint].neutral.splice(e,1)},t.prototype.track=function(){var t=this,i=Gt.nonCollidable.findIndex((function(i){return i.id===t.id}));Gt.nonCollidable.splice(i,1),Ht.push(this)},t.prototype.untrack=function(){var t=this;Gt.nonCollidable.push(this);var i=Ht.findIndex((function(i){return i.id===t.id}));Ht.splice(i,1)},t}();var pt=function(){return pt=Object.assign||function(t){for(var i,e=1,n=arguments.length;e<n;e++)for(var o in i=arguments[e])Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);return t},pt.apply(this,arguments)};const ut=function(){function t(t,i){this.id=s.genId(),this.width=70,this.height=60,this.position={x:t,y:Rt.height-i-this.height},this.startPos=pt({},this.position),this.type="platform",this.class="fragile platform",this.broken={level:30,is:!1},this.graphics={cords:c.getFragilePlatformImage(this.broken.is)},this.visible=!1}return t.prototype.draw=function(){Lt.c.drawImage(Wt,this.graphics.cords.x,this.graphics.cords.y,this.graphics.cords.width,this.graphics.cords.height,this.position.x,this.position.y,this.width,this.height)},t.prototype.break=function(){var t=this;if(this.broken.level>0)return this.broken.level-=1;this.broken.is=!0,this.graphics.cords=c.getFragilePlatformImage(this.broken.is);var i=Gt.collidable.findIndex((function(i){return i.id===t.id}));Gt.collidable.splice(i,1),-1===Gt.nonCollidable.findIndex((function(i){return i.id===t.id}))&&Gt.nonCollidable.push(this)},t.prototype.track=function(){var t=this;if(this.broken)i=Gt.nonCollidable.findIndex((function(i){return i.id===t.id})),Gt.nonCollidable.splice(i,1);else{var i=Gt.collidable.findIndex((function(i){return i.id===t.id}));Gt.collidable.splice(i,1)}Ht.push(this)},t.prototype.untrack=function(){var t=this;this.broken?Gt.nonCollidable.push(this):Gt.collidable.push(this);var i=Ht.findIndex((function(i){return i.id===t.id}));Ht.splice(i,1)},t}();var dt=function(){return dt=Object.assign||function(t){for(var i,e=1,n=arguments.length;e<n;e++)for(var o in i=arguments[e])Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);return t},dt.apply(this,arguments)};const ft=function(){function t(t,i,e,n){this.id=s.genId();var o=z.getGrassSize(e,n);this.position={x:t,y:Rt.height-i-o.height},this.startPos=dt({},this.position),this.height=o.height,this.width=o.width,this.graphics={cords:c.getGrassImageCords(e,n)},this.type="grass",this.visible=!0}return t.prototype.draw=function(){Lt.c.drawImage(Wt,this.graphics.cords.x,this.graphics.cords.y,this.graphics.cords.width,this.graphics.cords.height,this.position.x,this.position.y,this.width,this.height)},t.prototype.track=function(){var t=this,i=Gt.nonCollidable.findIndex((function(i){return i.id===t.id}));Gt.nonCollidable.splice(i,1),Ht.push(this)},t.prototype.untrack=function(){var t=this;Gt.nonCollidable.push(this);var i=Ht.findIndex((function(i){return i.id===t.id}));Ht.splice(i,1)},t}();var gt=function(){return gt=Object.assign||function(t){for(var i,e=1,n=arguments.length;e<n;e++)for(var o in i=arguments[e])Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);return t},gt.apply(this,arguments)},yt=!1,mt=6600,vt={x:100,y:100};const wt=function(){function t(t,i){this.playerAbstractionPos={x:t,y:i},this.descroll={step:0},this.currentBreakPoint=0,this.currentBreakPointRendered=!1,this.breakPoints=[{abstractionPos:{min:-1e4,max:2e5},reached:!1,platforms:[new F(-1450,0,"b","s","left"),new F(-1450,60,"b","s","right"),new F(-1450,120,"b","s","left"),new F(-1450,180,"b","s","right"),new F(-1450,240,"b","s","left"),new F(100,100,"b","s","right"),new F(320,190,"b","m","left"),new F(570,250,"b","s","left"),new F(800,320,"a","m","left"),new F(800,0,"b","m","left"),new F(1070,80,"a","s","left"),new F(1285,80,"a","s","left"),new F(1500,120,"b","m","left"),new F(1640,120,"b","l","left"),new F(2e3,80,"b","s","left"),new ut(2105,80),new F(2175,80,"b","s","right"),new F(2300,240,"b","m","left"),new ut(2450,240),new F(2520,240,"b","s","right"),new F(2710,240,"b","l","left"),new F(2910,240,"b","m","right"),new F(3150,120,"b","l","left"),new F(3500,10,"b","s","right"),new F(3475,65,"a","m","left"),new F(3500,105,"b","s","left"),new F(3500,165,"b","s","right"),new F(3465,220,"a","m","left"),new F(4045,60,"b","s","right"),new F(4220,190,"a","m","left"),new F(4270,250,"a","s","left"),new F(4520,260,"a","m","left"),new F(4670,260,"a","m","left"),new F(4470,80,"b","lg","left"),new ut(4690,80),new F(4750,70,"b","l","right"),new F(5050,200,"b","m","right"),new F(5350,280,"a","m","left"),new F(5500,80,"b","m","left"),new F(5750,140,"a","m","left"),new F(6e3,240,"b","m","left"),new F(6150,50,"a","m","left"),new F(6300,50,"a","m","left"),new F(6300,200,"a","s","left"),new F(6370,250,"a","s","left"),new F(6550,100,"b","lg","left"),new F(6770,100,"b","lg","right"),new F(7e3,100,"b","m","left"),new F(7180,60,"b","s","right"),new F(7180,120,"b","s","left"),new F(7180,180,"b","s","right"),new F(7180,240,"b","s","left"),new F(7180,300,"b","s","right"),new F(7180,360,"b","s","left")],enemies:[new U(-250,0,"l",""),new U(-295,80,"s","right"),new U(-205,50,"s","left"),new U(250,0,"s",""),new U(1180,-40,"m",""),new U(1220,-12,"s","left"),new D(1850,225,-250,0),new D(1700,0,0,300),new U(2620,-10,"m",""),new U(2660,70,"m","left"),new D(2410,0,0,200),new D(2310,0,0,200),new D(2750,0,0,300),new D(2800,300,0,250),new U(3100,0,"l",""),new U(3370,0,"m",""),new U(3410,50,"s","left"),new U(3750,0,"sm",""),new D(3900,0,0,100),new U(4e3,-35,"s",""),new U(4150,0,"s","right"),new U(4190,-30,"m",""),new D(4240,200,0,20),new ht(3670,400,0,400,!1),new D(4570,300,0,200),new D(4570,100,0,400),new ht(4520,10,0,200,!1),new ht(4720,10,0,300),new ht(5050,10,0,100,!1),new D(5150,250,0,0),new U(5200,0,"m",""),new U(5240,50,"m","left"),new D(5300,0,0,0),new U(6e3,0,"s",""),new ht(6200,100,0,200,!1),new U(6550,0,"sm",""),new U(6600,0,"sm",""),new U(6650,0,"sm",""),new U(6700,0,"sm",""),new U(6750,0,"sm",""),new U(6800,0,"sm",""),new U(6850,0,"sm",""),new U(6900,0,"sm",""),new U(6950,0,"sm",""),new U(7e3,0,"sm",""),new U(7050,0,"sm",""),new U(7100,0,"sm",""),new ht(6800,500,0,300,!0),new ht(6500,600,0,200,!0),new ht(6600,450,0,400),new ht(6500,400,0,150,!0),new ht(6800,550,0,100,!0),new ht(6750,600,-400,200,!0),new ht(7e3,650,-400,0,!0)],neutral:[new tt(-1e3,0),new tt(-1050,0),new tt(-1100,0),new tt(-1150,0),new tt(-1200,0),new tt(-1250,0),new lt(-110,0),new lt(300,0),new lt(450,250),new tt(620,0),new lt(910,355),new lt(910,55),new lt(1290,110),new tt(1750,170),new lt(2150,0),new lt(3e3,295),new lt(3610,95),new tt(3610,0),new tt(4240,0),new lt(4340,0),new tt(3420,0),new lt(4920,130),new lt(5e3,0),new lt(5060,255),new lt(5160,255),new lt(5310,0),new lt(5410,0),new tt(5410,310),new lt(5800,175),new tt(5900,0),new lt(6050,0),new lt(6100,295),new lt(6300,230),new lt(6380,280),new lt(6600,155),new lt(6750,155),new lt(6900,155),new lt(7050,155)],decorations:[new ft(-150,0,"l",!1),new ft(-190,0,"s",!1),new ft(1010,0,"s",!1),new ft(1700,180,"s",!1),new ft(1800,95,"s",!0),new ft(2200,140,"l",!1),new ft(3800,0,"m",!1),new ft(4290,0,"l",!1),new ft(4620,140,"s",!1),new ft(4670,140,"s",!1),new ft(4950,0,"l",!1),new ft(5460,320,"s",!1),new ft(5600,140,"s",!1),new ft(5850,180,"s",!1),new ft(6020,215,"s",!0),new ft(6430,290,"s",!1),new ft(6650,160,"s",!1),new ft(6850,160,"l",!1),new ft(7100,160,"s",!1)]}]}return t.prototype.updateGameObjects=function(){for(var t=0,i=Gt.playerFriendly;t<i.length;t++)i[t].draw();for(var e=0,n=Gt.nonCollidable;e<n.length;e++){var o=n[e];o.draw(),"item"===o.type&&(null==o||o.checkIfPlayerPicked())}for(var s=0,r=Gt.collidable;s<r.length;s++){var a=r[s];"enemy"===a.type&&"cactus"!==a.class?a.update():a.draw()}this.trackInvisible(),this.updateInformations()},t.prototype.trackRendering=function(){!Ut.winTimer.started&&this.playerAbstractionPos.x>=6450&&Ut.startWinTimer();for(var t=0,i=Gt.nonCollidable;t<i.length;t++){var e=i[t];"pickable stone"==e.type&&e.position.x<=Bt.position.x+Bt.width&&e.position.x+e.width>=Bt.position.x&&e.position.y+e.height>=Bt.position.y&&e.position.y<=Bt.position.y+Bt.height&&e.use()}if(!this.currentBreakPointRendered){this.currentBreakPointRendered=!0,Gt.collidable=[],Gt.nonCollidable=[];for(var n=this.currentBreakPoint;n>=this.currentBreakPoint-1;n--)n<0||(this.breakPoints[n].reached=!0,this.breakPoints[n].platforms.forEach((function(t){Gt.collidable.push(t)})),this.breakPoints[n].enemies.forEach((function(t){Gt.collidable.push(t)})),this.breakPoints[n].neutral.forEach((function(t){Gt.nonCollidable.push(t)})),this.breakPoints[n].decorations.forEach((function(t){Gt.nonCollidable.push(t)})))}if(this.playerAbstractionPos.x>this.breakPoints[this.currentBreakPoint].abstractionPos.max&&(this.currentBreakPoint+=1,this.breakPoints[this.currentBreakPoint].reached=!1,this.currentBreakPointRendered=!1),this.playerAbstractionPos.x<this.breakPoints[this.currentBreakPoint].abstractionPos.min&&(this.currentBreakPoint-=1,this.breakPoints[this.currentBreakPoint].reached=!1,this.currentBreakPointRendered=!1),yt){yt=!1,this.playerAbstractionPos.x=mt;for(var o=0,s=this.breakPoints;o<s.length;o++){var r=s[o];r.decorations.forEach((function(t){t.position.x-=mt})),r.enemies.forEach((function(t){t.position.x-=mt})),r.neutral.forEach((function(t){t.position.x-=mt})),r.platforms.forEach((function(t){t.position.x-=mt}))}}},t.prototype.updateInformations=function(){Ut.watchAndUpdatePlayerPos(this.playerAbstractionPos.x)},t.prototype.descrollAll=function(){var t=this;return new Promise((function(i,e){t.playerAbstractionPos=gt({},vt);for(var n=0,o=t.breakPoints;n<o.length;n++){for(var s=o[n],r=0,a=s.decorations;r<a.length;r++){var h=a[r];h.position=gt({},h.startPos)}for(var c=0,l=s.enemies;c<l.length;c++){var p=l[c];p.position=gt({},p.startPos)}for(var u=0,d=s.neutral;u<d.length;u++){var f=d[u];f.position=gt({},f.startPos)}for(var g=0,y=s.platforms;g<y.length;g++){var m=y[g];m.position=gt({},m.startPos)}}for(var v=0,w=Ht;v<w.length;v++){var b=w[v];b.position=gt({},b.startPos)}setTimeout((function(){t.trackInvisible(!0)}),0),i(!0)}))},t.prototype.trackInvisible=function(t){if(void 0===t&&(t=!1),!t&&this.descroll.step<30)return this.descroll.step+=1;for(var i=0,e=this.breakPoints;i<e.length;i++){for(var n=e[i],o=0,s=n.decorations;o<s.length;o++){var r=s[o];r.position.x+r.width<-300&&r.position.x>Rt.width+300&&(r.track(),r.visible=!1)}for(var a=0,h=n.enemies;a<h.length;a++){var c=h[a];c.position.x+c.width<-300&&c.position.x>Rt.width+300&&(null==c||c.track(),c.visible=!1)}for(var l=0,p=n.neutral;l<p.length;l++){var u=p[l];u.position.x+u.width<-300&&u.position.x>Rt.width+300&&(null==u||u.track(),null==u||(u.visible=!1))}for(var d=0,f=n.platforms;d<f.length;d++){var g=f[d];g.position.x+g.width<-300&&g.position.x>Rt.width+300&&(g.track(),g.visible=!1)}}for(var y=0,m=Ht;y<m.length;y++){var v=m[y];v.position.x+v.width>=-300&&v.position.x<=Rt.width+300&&(v.untrack(),v.visible=!0)}this.descroll.step=0},t}();var bt=-300,xt=2e3,Pt=0,It=40,kt=document.getElementById("oxygen-bottle").offsetHeight,Ct=5,Ot=8,_t=9,jt=10;const Mt=function(){function t(){this.playerPosIndex={div:document.getElementById("player-on-map"),min:bt,max:xt},this.runScore={div:document.getElementById("run-score"),value:0},this.totalScore={div:document.getElementById("total-score"),value:0},this.stones={div:document.getElementById("stones"),value:_t,max:jt},this.lives={div:document.getElementById("lives"),value:Ct,max:Ot},this.oxygen={div:document.getElementById("bottle-fill"),value:Pt,max:It},this.bag={div:document.getElementById("bag"),items:[],maxLen:8,itemsImgs:[]},this.winTimer={timer:null,value:30,started:!1,div:document.getElementById("game-over-timer")}}return t.prototype.watchAndUpdatePlayerPos=function(t){var i=Math.round(t/(this.playerPosIndex.max-this.playerPosIndex.min)*100);this.playerPosIndex.div.style.left=i+"%"},t.prototype.addScorePoints=function(t){var i=this;this.runScore.value+=t,this.totalScore.value+=t,this.runScore.div.innerHTML="",this.totalScore.div.innerHTML="";var e={run:this.runScore.value+"",total:this.totalScore.value+""},n={run:6-e.run.length,total:6-e.total.length};Object.values(n).forEach((function(t,e){for(var n=0;n<t;n++){var o=document.createElement("img");o.alt="score zero",o.src=c.getImage("0"),0===e?i.runScore.div.appendChild(o):i.totalScore.div.appendChild(o)}})),Object.values(e).forEach((function(t,e){for(var n=0,o=t;n<o.length;n++){var s=o[n],r=document.createElement("img");r.alt="score "+s,r.src=c.getImage(s),0===e?i.runScore.div.appendChild(r):i.totalScore.div.appendChild(r)}}))},t.prototype.resetRunScore=function(){this.runScore.div.innerHTML="",this.runScore.value=0;for(var t=0;t<6;t++){var i=document.createElement("img");i.alt="score zero",i.src=c.getImage("0"),this.runScore.div.appendChild(i)}},t.prototype.updateOxygen=function(t){this.oxygen.value=t;var i=Math.round(t/It*100)/100,e=Math.round(i*kt)-.1*kt;this.oxygen.div.style.height=e+"%"},t.prototype.updateStones=function(t){this.stones.div.innerHTML="",t>10&&(new W,t-=10),this.stones.value=t;for(var i=0;i<t;i++){var e=document.createElement("img");e.alt="stone image",e.src=c.getImage("stone"),i%2==0&&(e.style.top="40%"),this.stones.div.appendChild(e)}},t.prototype.updateLives=function(t){if(this.lives.value=t,t<0)return this.endGame("defeat");this.lives.div.innerHTML="";for(var i=0;i<t;i++){var e=document.createElement("img");e.alt="life image",e.src=c.getImage("life"),this.lives.div.appendChild(e)}},t.prototype.showItems=function(){this.bag.div.innerHTML="",this.bag.itemsImgs=[];for(var t=this.bag.maxLen-this.bag.items.length,i=0,e=this.bag.items;i<e.length;i++){var n=e[i];(s=document.createElement("img")).alt=n.class,s.src=c.getImage(n.class),this.bag.itemsImgs.push(s),this.bag.div.appendChild(s)}for(var o=0;o<t;o++){var s;(s=document.createElement("img")).alt="item placeholder",s.src=c.getImage("item placeholder"),this.bag.div.appendChild(s)}},t.prototype.resetItems=function(){this.bag.items=[],this.showItems()},t.prototype.addItem=function(t){this.bag.items.length>this.bag.maxLen?this.addScorePoints(100):(this.bag.items.push(t),this.showItems())},t.prototype.deleteItem=function(t){var i=this.bag.items.findIndex((function(i){return i.class===t.class}));if(-1===i)throw new Error("Item index out of range (please check deleteItem function at renderer)");this.bag.items.splice(i,1),this.showItems()},t.prototype.endGame=function(t){var i=document.createElement("div");i.classList.add("game-end");var e=document.createElement("h2"),n=document.createElement("p");n.innerText="Your final score: "+this.totalScore.value;var o=document.createElement("button");o.innerText="Play again!",o.onpointerdown=function(){return window.location.reload()},e.innerText="defeat"===t?"You have lost :(":"You won!",i.appendChild(e),i.appendChild(n),i.appendChild(o),document.getElementsByTagName("body")[0].appendChild(i)},t.prototype.startWinTimer=function(){var t=this;this.winTimer.started=!0,this.winTimer.timer=setInterval((function(){if(t.updateWinTimer(),t.winTimer.value<=0)return clearInterval(t.winTimer.timer),void t.endGame("victory");zt.playerAbstractionPos.x<6450&&(clearInterval(t.winTimer.timer),t.resetWinTimer()),t.winTimer.value-=1}),1e3)},t.prototype.resetWinTimer=function(){this.winTimer.value=30,this.winTimer.div.innerHTML="",this.winTimer.started=!1},t.prototype.updateWinTimer=function(){this.winTimer.div.innerHTML="";var t=(this.winTimer.value+"").split("");1===t.length&&t.unshift("0");for(var i=0,e=t;i<e.length;i++){var n=e[i],o=document.createElement("img");o.src=c.getImage(n),this.winTimer.div.appendChild(o)}},t}();var St=function(t,i,e,n){return new(e||(e=Promise))((function(o,s){function r(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){t.done?o(t.value):function(t){return t instanceof e?t:new e((function(i){i(t)}))}(t.value).then(r,a)}h((n=n.apply(t,i||[])).next())}))},Tt=function(t,i){var e,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=i.call(t,r)}catch(t){s=[6,t],n=0}finally{e=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},Et={gameStarted:!1,tutorialShown:!1,loadingScreen:document.getElementById("start-screen"),hotkeysScreen:document.getElementById("hotkeys")},At=document.getElementById("main"),Dt=new _,Rt={height:640,width:768,rerenderStep:20},Bt=new O(100,100,Rt.width),Ut=new Mt,zt=new wt(100,100),Lt={canvas:At,c:At.getContext("2d"),canvasProps:Rt,gravity:2,audioManager:Dt,renderer:zt,informationManager:Ut,player:Bt},Ft={up:!1,down:!1,left:!1,right:!1,f:!1,e:!1},Gt={collidable:[],playerFriendly:[],nonCollidable:[]},Ht=[],Wt=new Image;Wt.src="img/spritesheet.png";var qt=new Image;function Vt(t){return new Promise((function(i,e){t.complete&&i(!0),t.onload=function(){i(!0)}}))}function Jt(){return St(this,void 0,void 0,(function(){function i(){Lt.c.clearRect(0,0,Lt.canvas.width,Lt.canvas.height),Lt.c.fillStyle="black",Lt.c.fillRect(0,0,Rt.width,Rt.height),zt.trackRendering(),zt.updateGameObjects(),Bt.update(),setTimeout((function(){requestAnimationFrame(i)}),Lt.canvasProps.rerenderStep)}return Tt(this,(function(e){switch(e.label){case 0:return[4,Vt(Wt)];case 1:return e.sent(),[4,Vt(qt)];case 2:return e.sent(),[4,new Promise((function(i,e){try{var n=t();if(!n)return i(n);document.onpointerdown=function(){return null},document.onclick=function(){return null};var o=document.createElement("div");o.classList.add("mobile-btn"),o.setAttribute("id","left-button"),o.onpointerdown=function(){o.style.opacity="0.9",Ft.left=!0},o.onpointerup=function(){o.style.opacity="0.6",Ft.left=!1};var s=document.createElement("div");s.classList.add("mobile-btn"),s.setAttribute("id","right-button"),s.onpointerdown=function(){s.style.opacity="0.9",Ft.right=!0},s.onpointerup=function(){s.style.opacity="0.6",Ft.right=!1};var r=document.createElement("div");r.classList.add("mobile-btn"),r.setAttribute("id","up-button"),r.onpointerdown=function(){r.style.opacity="0.9",Ft.up=!0},r.onpointerup=function(){r.style.opacity="0.6",Ft.up=!1};var a=document.createElement("div");a.classList.add("mobile-btn"),a.setAttribute("id","attack-button"),a.onpointerdown=function(){a.style.opacity="0.9",Ft.f=!0},a.onpointerup=function(){a.style.opacity="0.6",Ft.f=!1};var h=document.createElement("div");h.classList.add("mobile-btn"),h.setAttribute("id","change-weapon-button"),h.onpointerdown=function(){h.style.opacity="0.9",Ft.e=!0},h.onpointerup=function(){h.style.opacity="0.6",Ft.e=!1};var c=document.getElementById("container");c.appendChild(o),c.appendChild(s),c.appendChild(r),c.appendChild(a),c.appendChild(h),console.log("jest"),i(n)}catch(t){e({err:t})}}))];case 3:return e.sent()&&(Et.hotkeysScreen.style.display="none"),Lt.canvas.width=Lt.canvasProps.width,Lt.canvas.height=Lt.canvasProps.height-6,Lt.audioManager.play(),Bt.draw(),Ut.addScorePoints(0),Ut.updateOxygen(0),Ut.updateStones(11),Ut.updateLives(5),i(),window.onkeydown=function(t){return function(t){"ArrowRight"!==t.key&&"d"!==t.key||(Ft.right=!0),"ArrowLeft"!==t.key&&"a"!==t.key||(Ft.left=!0),"ArrowUp"!==t.key&&"w"!==t.key||(Ft.up=!0),"f"===t.key&&(Ft.f=!0),"e"===t.key&&(Ft.e=!0)}(t)},window.onkeyup=function(t){return function(t){"ArrowRight"!==t.key&&"d"!==t.key||(Ft.right=!1),"ArrowLeft"!==t.key&&"a"!==t.key||(Ft.left=!1),"ArrowUp"!==t.key&&"w"!==t.key||(Ft.up=!1),"f"===t.key&&(Ft.f=!1),"e"===t.key&&(Ft.e=!1)}(t)},[2]}}))}))}if(qt.src="img/spritesheet_bright.png",!Et.gameStarted){var Nt;t()?((Nt=document.createElement("button")).innerText="Click here to start!",Nt.classList.add("mobile-start-game"),Nt.onpointerdown=function(){console.log("aaa"),Et.gameStarted=!0,Et.loadingScreen.style.display="none",Et.tutorialShown=!1,Et.hotkeysScreen.style.display="none",Jt()},Nt.onpointerenter=function(){console.log("aaa")},Et.loadingScreen.appendChild(Nt)):((Nt=document.createElement("p")).innerText="Press SPACEBAR to start game",Et.loadingScreen.appendChild(Nt),document.onkeydown=function(t){return St(void 0,void 0,void 0,(function(){return Tt(this,(function(i){return" "===t.key&&(Et.gameStarted=!0,Et.loadingScreen.style.display="none",document.onkeydown=function(){Et.tutorialShown=!1,Et.hotkeysScreen.style.display="none"},Jt()),[2]}))}))});var Yt=document.createElement("a");Yt.href="https://github.com/Remxin/fred-atari-game",Yt.innerText="🔗 Github link 🔗";var Qt=document.createElement("p");Qt.innerText="Created by Dawid Nabagło",Qt.classList.add("author"),Et.loadingScreen.appendChild(Yt),Et.loadingScreen.appendChild(Qt)}window.oncontextmenu=function(){return!1},document.oncontextmenu=function(){return!1},window.onpointerdown=function(){return!1},document.onpointerdown=function(){return!1}})()})();